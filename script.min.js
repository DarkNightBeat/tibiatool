
   
var tot ;
var randomBg= Math.floor((Math.random() * 18) + 1);
var src = "img/bg/"+randomBg+".jpg";
var bool = true;
var x = null;
var training = null;
var aviso = null;

setTimeout(function(){ 

	$("body").css("background", "url("+src+") center top");
	$("body").css("background-size", "100%");
	$("#num").html(parseInt($("#tr").val()));
	x = document.getElementById("audioalert"); 
	training = document.getElementById("tr").value;
	aviso = document.getElementById("falt").value;
}, 500);

$( "#tr" ).change(function() {
	$("#num").html(parseInt($("#tr").val()));
	training = document.getElementById("tr").value;
	aviso = document.getElementById("falt").value;
	check();
});

$( "#falt" ).change(function() {
	$("#num").html(parseInt($("#tr").val()));
	training = document.getElementById("tr").value;
	aviso = document.getElementById("falt").value;
	check();
});

var p = null;

function check(){
	if(training>500 || training<1){
		$("#tr").val(500);
		training = $("#tr").val();
	}
	if(aviso>499 || aviso<1){	
		$("#falt").val(499);
		aviso = $("#falt").val();
	}
	if(aviso>=training){
		$("#falt").val(training-10);
		aviso = $("#falt").val();
	}
}


function start(){

		if (p==null) {			
			p = window.setInterval(go, 2000);
			$(".start").html("Stop");
			$("#tr").prop('disabled', true);
			$("#falt").prop('disabled', true);
		}
		else{
			window.clearInterval(p);
			p = null;
			$(".start").html("Start");
			training = document.getElementById("tr").value;
			$("#num").html(parseInt($("#tr").val()));
			aviso = document.getElementById("falt").value;
			x.pause(); 

			$("#tr").prop('disabled', false);
			$("#falt").prop('disabled', false);
		}


}






function go(){



var countDownDate = new Date((training * 2)* 1000).getTime();
var countDown;

// Update the count down every 1 second
var y = setInterval(function() {

    console.log(countDownDate);
  // Get todays date and time
  var now = new Date().getTime();
    
  // Find the distance between now and the count down date
  var distance = countDownDate - now;
    
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);
    
  // Output the result in an element with id="demo"
  countDown = minutes + "m " + seconds + "s ";
    
    console.log(countDown);
  // If the count down is over, write some text 
  if (distance < 0) {
    clearInterval(y);
  }
}, 1000);



	

	training--;			
	tot = training;
	if (tot<=aviso) {	
		x.play(); 
	}

	document.getElementById("num").innerHTML = tot ;
	document.title = 'TWC = ' + tot + " / " + countDown;
}